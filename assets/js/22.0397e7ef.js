(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{647:function(e,_,n){"use strict";n.r(_);var t=n(34),v=Object(t.a)({},(function(){var e=this,_=e.$createElement,n=e._self._c||_;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"реалізація-інформаціиного-та-програмного-забезпечення"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#реалізація-інформаціиного-та-програмного-забезпечення"}},[e._v("#")]),e._v(" Реалізація інформаційного та програмного забезпечення")]),e._v(" "),n("p",[e._v("В рамках проекту розробляється:")]),e._v(" "),n("ul",[n("li",[e._v("SQL-скрипт для створення на початкового наповнення бази даних")]),e._v(" "),n("li",[e._v("RESTfull сервіс для управління даними")])]),e._v(" "),n("h1",{attrs:{id:"реалізація-інформаціиного-та-програмного-забезпечення-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#реалізація-інформаціиного-та-програмного-забезпечення-2"}},[e._v("#")]),e._v(" Реалізація інформаційного та програмного забезпечення")]),e._v(" "),n("p",[e._v("В рамках проекту розробляється:")]),e._v(" "),n("ul",[n("li",[e._v("SQL-скрипт для створення на початкового наповнення бази даних")]),e._v(" "),n("li",[e._v("RESTfull сервіс для управління даними")])]),e._v(" "),n("p",[e._v("-- MySQL Script generated by MySQL Workbench\n-- Sun Dec 25 07:19:21 2022\n-- Model: New Model    Version: 1.0\n-- MySQL Workbench Forward Engineering")]),e._v(" "),n("p",[e._v("SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;\nSET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;\nSET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Schema mydb")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP SCHEMA IF EXISTS "),n("code",[e._v("mydb")]),e._v(" ;")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Schema mydb")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("CREATE SCHEMA IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v(" DEFAULT CHARACTER SET utf8 ;\nUSE "),n("code",[e._v("mydb")]),e._v(" ;")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("answer")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("answer")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("answer")]),e._v(" (\n"),n("code",[e._v("user_id")]),e._v(" INT NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT NOT NULL,\n"),n("code",[e._v("data")]),e._v(" DATE NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("answer_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_selectedOption_id_idx")]),e._v(" ("),n("code",[e._v("answer_id")]),e._v(" ASC) VISIBLE,\nINDEX "),n("code",[e._v("fk_user_id_idx")]),e._v(" ("),n("code",[e._v("user_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_selectedOption_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("answer_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION,\nCONSTRAINT "),n("code",[e._v("fk_user_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("user_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("category")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("category")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("category")]),e._v(" (\n"),n("code",[e._v("category_id")]),e._v(" INT NOT NULL,\n"),n("code",[e._v("name")]),e._v(" VARCHAR(255) NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("category_id")]),e._v("));")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")]),e._v(" (\n"),n("code",[e._v("type")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("question_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_question_id_idx")]),e._v(" ("),n("code",[e._v("question_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_question_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("question_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("question")]),e._v(" (\n"),n("code",[e._v("type")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("topic")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("quiz_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_quiz_id_idx")]),e._v(" ("),n("code",[e._v("quiz_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_quiz_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("quiz_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("quiz")]),e._v(" (\n"),n("code",[e._v("type")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("text")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("topic")]),e._v(" TEXT(255) NOT NULL,\n"),n("code",[e._v("date")]),e._v(" DATETIME NOT NULL,\n"),n("code",[e._v("creator_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_creator_id_idx")]),e._v(" ("),n("code",[e._v("creator_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_creator_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("creator_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("selectedOption")]),e._v(" (\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\n"),n("code",[e._v("option_id")]),e._v(" INT NOT NULL,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("),\nINDEX "),n("code",[e._v("fk_option_id_idx")]),e._v(" ("),n("code",[e._v("option_id")]),e._v(" ASC) VISIBLE,\nCONSTRAINT "),n("code",[e._v("fk_option_id")]),e._v("\nFOREIGN KEY ("),n("code",[e._v("option_id")]),e._v(")\nREFERENCES "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("option")]),e._v(" ("),n("code",[e._v("id")]),e._v(")\nON DELETE NO ACTION\nON UPDATE NO ACTION);")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("-- Table "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")])]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("DROP TABLE IF EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" ;")]),e._v(" "),n("p",[e._v("CREATE TABLE IF NOT EXISTS "),n("code",[e._v("mydb")]),e._v("."),n("code",[e._v("user")]),e._v(" (\n"),n("code",[e._v("username")]),e._v(" VARCHAR(16) NOT NULL,\n"),n("code",[e._v("mail")]),e._v(" VARCHAR(255) NOT NULL,\n"),n("code",[e._v("id")]),e._v(" INT NOT NULL AUTO_INCREMENT,\nPRIMARY KEY ("),n("code",[e._v("id")]),e._v("));")]),e._v(" "),n("p",[e._v("SET SQL_MODE=@OLD_SQL_MODE;\nSET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;\nSET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;")]),e._v(" "),n("h2",{attrs:{id:"restfull-сервіс-для-управління-даними"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#restfull-сервіс-для-управління-даними"}},[e._v("#")]),e._v(" RESTfull сервіс для управління даними")]),e._v(" "),n("h3",{attrs:{id:"підключення-до-бази-даних"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#підключення-до-бази-даних"}},[e._v("#")]),e._v(" Підключення до бази даних")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const mysql = require("mysql2");\n\nconst connectionOptions = {\n  host: "localhost",\n  user: "root",\n  password: "Qwerty123",\n  database: "mydb",\n};\n\nconst pool = mysql.createConnection(connectionOptions);\n\nmodule.exports = { pool };\n\n')])])]),n("h3",{attrs:{id:"фаил-запуску-серверу"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#фаил-запуску-серверу"}},[e._v("#")]),e._v(" Файл запуску серверу")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const express = require("express");\nconst Controllers = require("./controllers");\nconst app = express();\nconst jsonParse = express.json();\n\napp.get("/survey/question/:id", Controllers.getQuestion);\n\napp.get("/survey/questions/", Controllers.getQuestions);\n\napp.post("/survey/question/", jsonParse, Controllers.createQuestion);\n\napp.delete("/survey/question/:id", Controllers.deleteQuestion);\n\napp.put("/survey/question/:id", jsonParse, Controllers.updateQuestion);\n\napp.listen(2222);\n\n')])])]),n("h3",{attrs:{id:"фаил-контролерів"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#фаил-контролерів"}},[e._v("#")]),e._v(" Файл контролерів")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const Model = require("./model");\n\nclass Controllers {\n  static resHandler = (res, data) => {\n    if (data) {\n      res.send(data);\n    } else {\n      res.sendStatus(404);\n    }\n  };\n\n  static getQuestion = async (req, res) => {\n    await Model.getQuestionById(req.params).then((result) => {\n      this.resHandler(res, result);\n    });\n  };\n  static getQuestions = async (req, res) => {\n    await Model.getAllQuestions().then((result) => {\n      this.resHandler(res, result);\n    });\n  };\n  static createQuestion = async (req, res) => {\n    if (!req.body) return res.sendStatus(400);\n    const id = Math.ceil(Math.random() * (100 - 1) * Math.random() * (100 - 1));\n    await Model.postQuestion({ id, ...req.body })\n      .then(() => Model.getQuestionById({ id }))\n      .then((result) => {\n        this.resHandler(res, result);\n      });\n  };\n  static deleteQuestion = async (req, res) => {\n    await Model.deleteQuestionById(req.params).then((result) => {\n      this.resHandler(res, result);\n    });\n  };\n  static updateQuestion = async (req, res) => {\n    if (!req.body) return res.sendStatus(400);\n    await Model.updateQuestionById(req.params, req.body)\n      .then(() => Model.getQuestionById(req.params))\n      .then((result) => {\n        this.resHandler(res, result);\n      });\n  };\n}\n\nmodule.exports = Controllers;\n\n')])])]),n("h3",{attrs:{id:"фаил-запитів-до-бази-даних"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#фаил-запитів-до-бази-даних"}},[e._v("#")]),e._v(" Файл запитів до бази даних")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const { pool } = require("./pool");\n\nclass Model {\n  static dbHandler = (sql) => {\n    return new Promise((resolve) => {\n      pool.connect(function(err) {\n        if (err) throw err;\n        return pool.query(sql, (err, result) => {\n          if (err) throw err;\n          resolve(result);\n        });\n      });\n    });\n  };\n  static getQuestionById = ({ id }) => {\n    const sql = `SELECT * FROM mydb.question WHERE id = ${id}`;\n    return this.dbHandler(sql);\n  };\n  static getAllQuestions = () => {\n    const sql = `SELECT * from mydb.question`;\n    return this.dbHandler(sql);\n  };\n  static postQuestion = ({ id, type, text, quiz_id, topic }) => {\n    const sql = `INSERT INTO mydb.question (id, type, text, quiz_id, topic) VALUES (${id},\\"${type}\\", \\"${text}\\", ${quiz_id}, \\"${topic}\\")`;\n    return this.dbHandler(sql);\n  };\n  static deleteQuestionById = ({ id }) => {\n    const sql = `DELETE FROM mydb.question WHERE id = ${id}`;\n    return this.dbHandler(sql).then(\n      () => `Question with id: ${id} was deleted!`\n    );\n  };\n  static updateQuestionById = ({ id }, { type, text, quiz_id, topic }) => {\n    const sql = `UPDATE mydb.question SET type = \\"${type}\\", text = \\"${text}\\", quiz_id = \\"${quiz_id}\\", topic = \\"${topic}\\" WHERE id = ${id} `;\n    return this.dbHandler(sql);\n  };\n}\n\nmodule.exports = Model;\n\n')])])])])}),[],!1,null,null,null);_.default=v.exports}}]);